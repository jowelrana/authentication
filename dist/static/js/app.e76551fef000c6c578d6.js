webpackJsonp([1],{Ba62:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hello"},[s("ul",{staticClass:"nav"},[s("li",[s("router-link",{attrs:{to:{name:"home"}}},[e._v("Home")])],1),e._v(" "),e.loggedIn?e._e():s("li",[s("router-link",{attrs:{to:{name:"login"}}},[e._v("Login")])],1),e._v(" "),e.loggedIn?e._e():s("li",[s("router-link",{attrs:{to:{name:"register"}}},[e._v("Register")])],1),e._v(" "),e.loggedIn?s("li",[s("router-link",{attrs:{to:{name:"logout"}}},[e._v("Logout")])],1):e._e()]),e._v(" "),s("router-view")],1)},staticRenderFns:[]},o={name:"App",components:{HelloWorld:s("VU/8")({computed:{loggedIn:function(){return this.$store.getters.loggedIn}}},n,!1,null,null,null).exports}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("HelloWorld")],1)},staticRenderFns:[]};var i=s("VU/8")(o,r,!1,function(e){s("Ba62")},null,null).exports,l=s("/ocq"),c={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page-wrapper flex-center"},[t("h2",[this._v("Node & Vue js Authentication")])])}]},u=s("VU/8")(null,c,!1,null,null,null).exports,m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-wrapper login-form"},[s("h2",{staticClass:"login-heading"},[e._v("Login")]),e._v(" "),e.successMessage?s("div",{staticClass:"success-message"},[e._v(e._s(e.successMessage))]):e._e(),e._v(" "),e.errorMessage?s("div",{staticClass:"server-error"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),s("div",{staticClass:"form-control"},[s("label",{attrs:{for:"email"}},[e._v("Email*")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"login-input",attrs:{type:"email",name:"email",id:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-control mb-more"},[s("label",{attrs:{for:"password"}},[e._v("Password*")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"login-input",attrs:{type:"password",name:"password",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-control"},[s("button",{staticClass:"btn-submit",attrs:{type:"submit"},on:{click:e.login}},[e._v("\n        Login\n      ")])])])},staticRenderFns:[]},d=s("VU/8")({name:"login",data:function(){return{email:"",password:"",errorMessage:"",successMessage:""}},methods:{login:function(){var e=this;""!==this.email&&""!==this.password?this.$store.dispatch("retrieveToken",{email:this.email,password:this.password}).then(function(t){e.$router.push({name:"home"})}).catch(function(t){e.errorMessage=t.response.data.message,e.password="",e.successMessage=""}):this.errorMessage="Please fill in all required fields"}}},m,!1,null,null,null).exports,p={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},v=s("VU/8")({created:function(){var e=this;this.$store.dispatch("destroyToken").then(function(t){e.$router.push({name:"login"})})}},p,!1,null,null,null).exports,g=s("mtWM"),f=s.n(g),h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-wrapper login-form"},[s("h2",{staticClass:"login-heading"},[e._v("Register")]),e._v(" "),e.errorMessage?s("div",{staticClass:"server-error"},[s("p",[e._v(e._s(e.errorMessage))])]):e._e(),e._v(" "),e.successMessage?s("div",{staticClass:"server-error"},[s("p",[e._v(e._s(e.successMessage))])]):e._e(),e._v(" "),s("div",{staticClass:"form-control"},[s("label",{attrs:{for:"email"}},[e._v("Email*")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"login-input",attrs:{type:"text",name:"email",id:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),e.step?s("div",[s("div",{staticClass:"form-control"},[s("label",{attrs:{for:"code"}},[e._v("Verification code*")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"login-input",attrs:{type:"text",name:"code",id:"code"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-control"},[s("label",{attrs:{for:"name"}},[e._v("Name*")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"login-input",attrs:{type:"text",name:"name",id:"name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-control mb-more"},[s("label",{attrs:{for:"password"}},[e._v("Password*")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"login-input",attrs:{type:"password",name:"password",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-control"},[s("button",{staticClass:"btn-submit",attrs:{type:"submit"},on:{click:e.register}},[e._v("Submit")])])]):s("div",[s("div",{staticClass:"form-control"},[s("button",{staticClass:"btn-submit",attrs:{type:"submit"},on:{click:e.stepOne}},[e._v("Next")])])])])},staticRenderFns:[]},_=[{path:"/",name:"home",component:u},{path:"/login",name:"login",component:d},{path:"/register",name:"register",component:s("VU/8")({data:function(){return{email:"",name:"",step:!1,code:"",password:"",errorMessage:"",successMessage:""}},methods:{stepOne:function(){var e=this;""!=this.email?(this.errorMessage="",this.$store.dispatch("step",{email:this.email}).then(function(t){e.successMessage=t.data.message,e.step=!0}).catch(function(t){e.errorMessage=t.response.data.message})):this.errorMessage="Please enter email address"},register:function(){var e=this;""!=this.email&&""!=this.name&&""!=this.code&&""!=this.password?this.$store.dispatch("register",{name:this.name,email:this.email,code:this.code,password:this.password}).then(function(t){e.successMessage="Registered Successfully!",e.$router.push({name:"home"})}).catch(function(t){e.errorMessage=t.response.data.message}):this.errorMessage="Please fill in all required fields"}}},h,!1,null,null,null).exports},{path:"/logout",name:"logout",component:v}],w=s("//Fk"),k=s.n(w),C=s("NYxO");a.a.use(C.a),f.a.defaults.baseURL="https://vueauth.herokuapp.com/api/auth";var b=new C.a.Store({state:{token:localStorage.getItem("access_token")||null},getters:{loggedIn:function(e){return null!==e.token}},mutations:{retrieveToken:function(e,t){e.token=t},destroyToken:function(e){e.token=null}},actions:{retrieveName:function(e){return f.a.defaults.headers.common.Authorization="Bearer "+e.state.token,new k.a(function(e,t){f.a.get("/user").then(function(t){e(t)}).catch(function(e){t(e)})})},step:function(e,t){return new k.a(function(e,s){f.a.post("/first_step",{email:t.email}).then(function(t){e(t)}).catch(function(e){s(e)})})},register:function(e,t){return new k.a(function(s,a){f.a.post("/register",{name:t.name,email:t.email,code:t.code,password:t.password}).then(function(t){var a=t.data.token;localStorage.setItem("access_token",a),e.commit("retrieveToken",a),s(t)}).catch(function(e){a(e)})})},destroyToken:function(e){localStorage.removeItem("access_token"),e.commit("destroyToken")},retrieveToken:function(e,t){return new k.a(function(s,a){f.a.post("/login",{email:t.email,password:t.password}).then(function(t){var a=t.data.token;localStorage.setItem("access_token",a),e.commit("retrieveToken",a),s(t)}).catch(function(e){console.log(e),a(e)})})}}});window.eventBus=new a.a,a.a.config.productionTip=!1,a.a.use(l.a);var M=new l.a({routes:_,mode:"history"});M.beforeEach(function(e,t,s){e.matched.some(function(e){return e.meta.requiresAuth})?b.getters.loggedIn?s():s({name:"login"}):s()}),new a.a({el:"#app",router:M,store:b,components:{App:i},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.e76551fef000c6c578d6.js.map